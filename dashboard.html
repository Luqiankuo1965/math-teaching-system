<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜ç­‰æ•°å­¦æ•™å­¦æ•°æ®çœ‹æ¿ - å®Œæ•´ç‰ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: #f5f7fa;
            min-height: 100vh;
        }
        
        /* å¯¼èˆªæ  */
        .navbar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .navbar h1 {
            font-size: 24px;
            font-weight: 600;
        }
        
        .nav-links {
            display: flex;
            gap: 20px;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: opacity 0.3s;
        }
        
        .nav-links a:hover {
            opacity: 0.8;
        }
        
        /* ä¸»å®¹å™¨ */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px;
        }
        
        /* ä¸Šå†Œ/ä¸‹å†Œåˆ‡æ¢ */
        .volume-switch {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            background: white;
            padding: 10px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        
        .volume-btn {
            flex: 1;
            padding: 15px 25px;
            border: none;
            border-radius: 8px;
            background: white;
            color: #666;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .volume-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        
        .volume-btn:hover:not(.active) {
            background: #f0f0f0;
        }
        
        /* ç»Ÿè®¡å¡ç‰‡ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        
        .stat-card .icon {
            font-size: 32px;
            margin-bottom: 15px;
        }
        
        .stat-card .label {
            color: #666;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .stat-card .value {
            font-size: 32px;
            font-weight: 700;
            color: #333;
        }
        
        .stat-card .change {
            font-size: 13px;
            margin-top: 10px;
        }
        
        .stat-card .change.positive {
            color: #4CAF50;
        }
        
        .stat-card .change.negative {
            color: #f44336;
        }
        
        /* å›¾è¡¨åŒºåŸŸ */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .chart-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }
        
        .chart-card h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .chart-card h3 .icon {
            font-size: 20px;
        }
        
        .chart-container {
            height: 350px;
        }
        
        /* ç« èŠ‚è¿›åº¦ */
        .chapter-progress {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }
        
        .chapter-progress h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 25px;
            color: #333;
        }
        
        .progress-item {
            margin-bottom: 20px;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .progress-header .chapter-name {
            font-weight: 600;
            color: #333;
        }
        
        .progress-header .progress-value {
            color: #666;
        }
        
        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .progress-fill.low {
            background: linear-gradient(90deg, #f44336 0%, #e57373 100%);
        }
        
        .progress-fill.medium {
            background: linear-gradient(90deg, #ff9800 0%, #ffb74d 100%);
        }
        
        .progress-fill.high {
            background: linear-gradient(90deg, #4CAF50 0%, #81c784 100%);
        }
        
        /* é£é™©å­¦ç”Ÿåˆ—è¡¨ */
        .risk-students {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }
        
        .risk-students h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 25px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .risk-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .risk-table th {
            text-align: left;
            padding: 15px;
            background: #f5f7fa;
            font-weight: 600;
            color: #666;
            font-size: 14px;
        }
        
        .risk-table td {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
            font-size: 14px;
        }
        
        .risk-table tr:last-child td {
            border-bottom: none;
        }
        
        .risk-level {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .risk-level.high {
            background: #ffebee;
            color: #c62828;
        }
        
        .risk-level.medium {
            background: #fff3e0;
            color: #ef6c00;
        }
        
        .risk-level.low {
            background: #e8f5e9;
            color: #2e7d32;
        }
        
        /* çŸ¥è¯†ç‚¹çƒ­åŠ›å›¾ */
        .knowledge-heatmap {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }
        
        .knowledge-heatmap h3 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 25px;
            color: #333;
        }
        
        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .heatmap-item {
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            transition: transform 0.3s;
            cursor: pointer;
        }
        
        .heatmap-item:hover {
            transform: scale(1.05);
        }
        
        .heatmap-item .score {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .heatmap-item .label {
            font-size: 13px;
            color: white;
        }
        
        /* å“åº”å¼ */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 15px;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .volume-switch {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <h1>ğŸ“Š é«˜ç­‰æ•°å­¦æ•™å­¦æ•°æ®çœ‹æ¿</h1>
        <div class="nav-links">
            <a href="index.html">é¦–é¡µ</a>
            <a href="feedback_complete.html">åé¦ˆæäº¤</a>
            <a href="exam.html">åœ¨çº¿æµ‹è¯•</a>
        </div>
    </nav>
    
    <div class="container">
        <!-- ä¸Šå†Œ/ä¸‹å†Œåˆ‡æ¢ -->
        <div class="volume-switch">
            <button class="volume-btn active" onclick="switchVolume('volume1')">
                ğŸ“˜ é«˜ç­‰æ•°å­¦ï¼ˆä¸Šå†Œï¼‰
            </button>
            <button class="volume-btn" onclick="switchVolume('volume2')">
                ğŸ“— é«˜ç­‰æ•°å­¦ï¼ˆä¸‹å†Œï¼‰
            </button>
        </div>
        
        <!-- ç»Ÿè®¡å¡ç‰‡ -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="icon">ğŸ‘¥</div>
                <div class="label">å­¦ç”Ÿæ€»æ•°</div>
                <div class="value" id="totalStudents">0</div>
                <div class="change positive">â†‘ +12 æœ¬å‘¨</div>
            </div>
            
            <div class="stat-card">
                <div class="icon">ğŸ“</div>
                <div class="label">åé¦ˆæ€»æ•°</div>
                <div class="value" id="totalFeedbacks">0</div>
                <div class="change positive">â†‘ +45 æœ¬å‘¨</div>
            </div>
            
            <div class="stat-card">
                <div class="icon">â­</div>
                <div class="label">å¹³å‡è¯„åˆ†</div>
                <div class="value" id="averageRating">0.0</div>
                <div class="change positive">â†‘ +0.3 æœ¬å‘¨</div>
            </div>
            
            <div class="stat-card">
                <div class="icon">âš ï¸</div>
                <div class="label">é£é™©å­¦ç”Ÿ</div>
                <div class="value" id="riskStudents">0</div>
                <div class="change negative">â†‘ +3 æœ¬å‘¨</div>
            </div>
            
            <div class="stat-card">
                <div class="icon">â±ï¸</div>
                <div class="label">å¹³å‡å­¦ä¹ æ—¶é•¿</div>
                <div class="value" id="avgStudyTime">0h</div>
                <div class="change positive">â†‘ +0.5h æœ¬å‘¨</div>
            </div>
            
            <div class="stat-card">
                <div class="icon">ğŸ“ˆ</div>
                <div class="label">ç« èŠ‚å®Œæˆç‡</div>
                <div class="value" id="chapterCompletion">0%</div>
                <div class="change positive">â†‘ +5% æœ¬å‘¨</div>
            </div>
        </div>
        
        <!-- å›¾è¡¨åŒºåŸŸ -->
        <div class="charts-grid">
            <div class="chart-card">
                <h3><span class="icon">ğŸ“Š</span> åé¦ˆè¶‹åŠ¿åˆ†æ</h3>
                <div class="chart-container">
                    <canvas id="feedbackTrendChart"></canvas>
                </div>
            </div>
            
            <div class="chart-card">
                <h3><span class="icon">ğŸ¯</span> éš¾åº¦åˆ†å¸ƒç»Ÿè®¡</h3>
                <div class="chart-container">
                    <canvas id="difficultyChart"></canvas>
                </div>
            </div>
            
            <div class="chart-card">
                <h3><span class="icon">ğŸ“š</span> å„ç« èŠ‚å­¦ä¹ æƒ…å†µ</h3>
                <div class="chart-container">
                    <canvas id="chapterChart"></canvas>
                </div>
            </div>
            
            <div class="chart-card">
                <h3><span class="icon">â°</span> å­¦ä¹ æ—¶é—´åˆ†å¸ƒ</h3>
                <div class="chart-container">
                    <canvas id="timeChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- ç« èŠ‚è¿›åº¦ -->
        <div class="chapter-progress">
            <h3>ğŸ“ˆ ç« èŠ‚å­¦ä¹ è¿›åº¦</h3>
            <div id="chapterProgressContainer">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <!-- çŸ¥è¯†ç‚¹çƒ­åŠ›å›¾ -->
        <div class="knowledge-heatmap">
            <h3>ğŸ”¥ çŸ¥è¯†ç‚¹æŒæ¡åº¦çƒ­åŠ›å›¾</h3>
            <div class="heatmap-grid" id="heatmapContainer">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <!-- é£é™©å­¦ç”Ÿåˆ—è¡¨ -->
        <div class="risk-students">
            <h3>âš ï¸ é£é™©å­¦ç”Ÿé¢„è­¦</h3>
            <table class="risk-table">
                <thead>
                    <tr>
                        <th>å­¦å·</th>
                        <th>å§“å</th>
                        <th>å½“å‰ç« èŠ‚</th>
                        <th>å¹³å‡åˆ†</th>
                        <th>é£é™©ç­‰çº§</th>
                        <th>å»ºè®®æªæ–½</th>
                    </tr>
                </thead>
                <tbody id="riskTableBody">
                    <!-- åŠ¨æ€ç”Ÿæˆ -->
                </tbody>
            </table>
        </div>
    </div>
    
    <script>
        // ç« èŠ‚æ•°æ®
        const volumeData = {
            volume1: {
                name: "é«˜ç­‰æ•°å­¦ï¼ˆä¸Šå†Œï¼‰",
                chapters: [
                    { id: 1, name: "ç¬¬ä¸€ç« ï¼šå‡½æ•°ä¸æé™", progress: 85, mastery: 75 },
                    { id: 2, name: "ç¬¬äºŒç« ï¼šå¯¼æ•°ä¸å¾®åˆ†", progress: 72, mastery: 68 },
                    { id: 3, name: "ç¬¬ä¸‰ç« ï¼šå¾®åˆ†ä¸­å€¼å®šç†", progress: 65, mastery: 60 },
                    { id: 4, name: "ç¬¬å››ç« ï¼šä¸å®šç§¯åˆ†", progress: 58, mastery: 55 },
                    { id: 5, name: "ç¬¬äº”ç« ï¼šå®šç§¯åˆ†", progress: 45, mastery: 42 },
                    { id: 6, name: "ç¬¬å…­ç« ï¼šå¾®åˆ†æ–¹ç¨‹", progress: 32, mastery: 30 }
                ]
            },
            volume2: {
                name: "é«˜ç­‰æ•°å­¦ï¼ˆä¸‹å†Œï¼‰",
                chapters: [
                    { id: 7, name: "ç¬¬ä¸ƒç« ï¼šå‘é‡ä»£æ•°", progress: 28, mastery: 25 },
                    { id: 8, name: "ç¬¬å…«ç« ï¼šå¤šå…ƒå‡½æ•°å¾®åˆ†", progress: 22, mastery: 20 },
                    { id: 9, name: "ç¬¬ä¹ç« ï¼šé‡ç§¯åˆ†", progress: 15, mastery: 12 },
                    { id: 10, name: "ç¬¬åç« ï¼šæ›²çº¿æ›²é¢ç§¯åˆ†", progress: 10, mastery: 8 },
                    { id: 11, name: "ç¬¬åä¸€ç« ï¼šæ— ç©·çº§æ•°", progress: 5, mastery: 3 },
                    { id: 12, name: "ç¬¬åäºŒç« ï¼šå¾®åˆ†å‡ ä½•", progress: 2, mastery: 1 }
                ]
            }
        };
        
        // é£é™©å­¦ç”Ÿæ•°æ®
        const riskStudentsData = [
            { id: "2024001", name: "å¼ ä¸‰", chapter: "ç¬¬å››ç« ", avgScore: 52, level: "high", suggestion: "ç«‹å³å®‰æ’è¾…å¯¼" },
            { id: "2024005", name: "æå››", chapter: "ç¬¬äº”ç« ", avgScore: 58, level: "high", suggestion: "å¢åŠ è¯¾åç»ƒä¹ " },
            { id: "2024012", name: "ç‹äº”", chapter: "ç¬¬ä¸‰ç« ", avgScore: 62, level: "medium", suggestion: "é‡ç‚¹å…³æ³¨" },
            { id: "2024018", name: "èµµå…­", chapter: "ç¬¬å››ç« ", avgScore: 65, level: "medium", suggestion: "å»ºè®®è¡¥è¯¾" },
            { id: "2024025", name: "é’±ä¸ƒ", chapter: "ç¬¬äºŒç« ", avgScore: 68, level: "low", suggestion: "è‡ªä¸»å­¦ä¹ " }
        ];
        
        let currentVolume = 'volume1';
        let charts = {};
        
        // åˆ‡æ¢æ•™æ
        function switchVolume(volume) {
            currentVolume = volume;
            
            // æ›´æ–°æŒ‰é’®æ ·å¼
            document.querySelectorAll('.volume-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent.includes(volume === 'volume1' ? 'ä¸Šå†Œ' : 'ä¸‹å†Œ')) {
                    btn.classList.add('active');
                }
            });
            
            // æ›´æ–°æ‰€æœ‰å›¾è¡¨å’Œæ•°æ®
            updateDashboard();
        }
        
        // æ›´æ–°ä»ªè¡¨æ¿
        function updateDashboard() {
            const data = volumeData[currentVolume];
            
            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            document.getElementById('totalStudents').textContent = Math.floor(Math.random() * 50) + 200;
            document.getElementById('totalFeedbacks').textContent = Math.floor(Math.random() * 100) + 500;
            document.getElementById('averageRating').textContent = (Math.random() * 1 + 3.5).toFixed(1);
            document.getElementById('riskStudents').textContent = Math.floor(Math.random() * 10) + 5;
            document.getElementById('avgStudyTime').textContent = (Math.random() * 2 + 2).toFixed(1) + 'h';
            
            // è®¡ç®—å¹³å‡å®Œæˆç‡
            const avgProgress = data.chapters.reduce((sum, ch) => sum + ch.progress, 0) / data.chapters.length;
            document.getElementById('chapterCompletion').textContent = avgProgress.toFixed(0) + '%';
            
            // æ›´æ–°ç« èŠ‚è¿›åº¦
            updateChapterProgress(data.chapters);
            
            // æ›´æ–°çŸ¥è¯†ç‚¹çƒ­åŠ›å›¾
            updateHeatmap(data.chapters);
            
            // æ›´æ–°å›¾è¡¨
            updateCharts(data);
        }
        
        // æ›´æ–°ç« èŠ‚è¿›åº¦
        function updateChapterProgress(chapters) {
            const container = document.getElementById('chapterProgressContainer');
            container.innerHTML = '';
            
            chapters.forEach(chapter => {
                const progressClass = chapter.progress < 50 ? 'low' : chapter.progress < 80 ? 'medium' : 'high';
                
                const html = `
                    <div class="progress-item">
                        <div class="progress-header">
                            <span class="chapter-name">${chapter.name}</span>
                            <span class="progress-value">${chapter.progress}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill ${progressClass}" style="width: ${chapter.progress}%"></div>
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }
        
        // æ›´æ–°çŸ¥è¯†ç‚¹çƒ­åŠ›å›¾
        function updateHeatmap(chapters) {
            const container = document.getElementById('heatmapContainer');
            container.innerHTML = '';
            
            chapters.forEach(chapter => {
                const color = chapter.mastery >= 70 ? '#4CAF50' : chapter.mastery >= 50 ? '#FF9800' : '#f44336';
                
                const html = `
                    <div class="heatmap-item" style="background: ${color};">
                        <div class="score">${chapter.mastery}%</div>
                        <div class="label">${chapter.name.substring(0, 4)}</div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }
        
        // åˆå§‹åŒ–å›¾è¡¨
        function initCharts() {
            // åé¦ˆè¶‹åŠ¿å›¾
            const feedbackTrendCtx = document.getElementById('feedbackTrendChart').getContext('2d');
            charts.feedbackTrend = new Chart(feedbackTrendCtx, {
                type: 'line',
                data: {
                    labels: ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'],
                    datasets: [{
                        label: 'åé¦ˆæ•°é‡',
                        data: [12, 19, 15, 25, 22, 30, 28],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // éš¾åº¦åˆ†å¸ƒå›¾
            const difficultyCtx = document.getElementById('difficultyChart').getContext('2d');
            charts.difficulty = new Chart(difficultyCtx, {
                type: 'doughnut',
                data: {
                    labels: ['ç®€å•', 'ä¸­ç­‰', 'å›°éš¾'],
                    datasets: [{
                        data: [35, 45, 20],
                        backgroundColor: ['#4CAF50', '#FF9800', '#f44336'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
            
            // ç« èŠ‚å­¦ä¹ æƒ…å†µå›¾
            const chapterCtx = document.getElementById('chapterChart').getContext('2d');
            charts.chapter = new Chart(chapterCtx, {
                type: 'bar',
                data: {
                    labels: ['ç¬¬ä¸€ç« ', 'ç¬¬äºŒç« ', 'ç¬¬ä¸‰ç« ', 'ç¬¬å››ç« ', 'ç¬¬äº”ç« ', 'ç¬¬å…­ç« '],
                    datasets: [{
                        label: 'å­¦ä¹ äººæ•°',
                        data: [85, 82, 78, 65, 45, 32],
                        backgroundColor: 'rgba(102, 126, 234, 0.8)',
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // å­¦ä¹ æ—¶é—´åˆ†å¸ƒå›¾
            const timeCtx = document.getElementById('timeChart').getContext('2d');
            charts.time = new Chart(timeCtx, {
                type: 'bar',
                data: {
                    labels: ['0-1h', '1-2h', '2-3h', '3-4h', '4h+'],
                    datasets: [{
                        label: 'å­¦ç”Ÿäººæ•°',
                        data: [15, 45, 60, 35, 20],
                        backgroundColor: [
                            'rgba(102, 126, 234, 0.6)',
                            'rgba(118, 75, 162, 0.7)',
                            'rgba(102, 126, 234, 0.8)',
                            'rgba(118, 75, 162, 0.9)',
                            'rgba(102, 126, 234, 1)'
                        ],
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // æ›´æ–°é£é™©å­¦ç”Ÿè¡¨æ ¼
            updateRiskTable();
        }
        
        // æ›´æ–°å›¾è¡¨æ•°æ®
        function updateCharts(data) {
            // æ›´æ–°ç« èŠ‚å›¾è¡¨
            const chapterLabels = data.chapters.map(ch => ch.name.substring(0, 2));
            const chapterValues = data.chapters.map(ch => ch.progress * 2);
            
            charts.chapter.data.labels = chapterLabels;
            charts.chapter.data.datasets[0].data = chapterValues;
            charts.chapter.update();
        }
        
        // æ›´æ–°é£é™©å­¦ç”Ÿè¡¨æ ¼
        function updateRiskTable() {
            const tbody = document.getElementById('riskTableBody');
            tbody.innerHTML = '';
            
            riskStudentsData.forEach(student => {
                const levelText = student.level === 'high' ? 'é«˜é£é™©' : student.level === 'medium' ? 'ä¸­é£é™©' : 'ä½é£é™©';
                
                const html = `
                    <tr>
                        <td>${student.id}</td>
                        <td>${student.name}</td>
                        <td>${student.chapter}</td>
                        <td>${student.avgScore}</td>
                        <td><span class="risk-level ${student.level}">${levelText}</span></td>
                        <td>${student.suggestion}</td>
                    </tr>
                `;
                tbody.innerHTML += html;
            });
        }
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initCharts();
            updateDashboard();
        });
    </script>
</body>
</html>
