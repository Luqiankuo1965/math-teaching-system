name: æ™ºèƒ½è¯¾å ‚ç™½æ¿ç”Ÿæˆç³»ç»Ÿ - å®Œæ•´ç‰ˆï¼ˆ12ç« ï¼‰

on:
  workflow_dispatch:
    inputs:
      volume:
        description: 'é€‰æ‹©æ•™æ'
        required: true
        type: choice
        options:
          - ä¸Šå†Œ
          - ä¸‹å†Œ
        default: 'ä¸Šå†Œ'
      chapter:
        description: 'é€‰æ‹©ç« èŠ‚ï¼ˆ1-12ï¼‰'
        required: true
        type: choice
        options:
          - 'ç¬¬ä¸€ç« '
          - 'ç¬¬äºŒç« '
          - 'ç¬¬ä¸‰ç« '
          - 'ç¬¬å››ç« '
          - 'ç¬¬äº”ç« '
          - 'ç¬¬å…­ç« '
          - 'ç¬¬ä¸ƒç« '
          - 'ç¬¬å…«ç« '
          - 'ç¬¬ä¹ç« '
          - 'ç¬¬åç« '
          - 'ç¬¬åä¸€ç« '
          - 'ç¬¬åäºŒç« '
        default: 'ç¬¬ä¸€ç« '
      difficulty:
        description: 'éš¾åº¦ç­‰çº§'
        required: true
        type: choice
        options:
          - ç®€å•
          - ä¸­ç­‰
          - å›°éš¾
        default: 'ä¸­ç­‰'
      include_exercises:
        description: 'åŒ…å«è¯¾å ‚ç»ƒä¹ '
        required: true
        type: boolean
        default: true
      include_homework:
        description: 'å¸ƒç½®è¯¾åä½œä¸š'
        required: true
        type: boolean
        default: true
      enable_notes:
        description: 'å¯ç”¨å­¦ç”Ÿç¬”è®°åŠŸèƒ½'
        required: true
        type: boolean
        default: true

env:
  PYTHON_VERSION: '3.11'

jobs:
  generate_whiteboard:
    runs-on: ubuntu-latest
    
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
      
      - name: è®¾ç½®Pythonç¯å¢ƒ
        uses: actions/setup-python@v4
        with:
          python-version: ${{ env.PYTHON_VERSION }}
      
      - name: åˆ›å»ºç›®å½•ç»“æ„
        run: |
          mkdir -p data/whiteboards
          mkdir -p data/whiteboards/volume1
          mkdir -p data/whiteboards/volume2
      
      - name: ç”Ÿæˆç™½æ¿å†…å®¹
        run: python3 << 'PYTHON_SCRIPT'
import os
import json
from datetime import datetime

# ç« èŠ‚æ¨¡æ¿åº“
chapter_templates = {
    # ========== ä¸Šå†Œ ==========
    "ç¬¬ä¸€ç« ": {
        "title": "ç¬¬ä¸€ç« ï¼šå‡½æ•°ä¸æé™",
        "volume": "ä¸Šå†Œ",
        "objectives": [
            "ç†è§£å‡½æ•°çš„æ¦‚å¿µä¸æ€§è´¨",
            "æŒæ¡æé™çš„å®šä¹‰å’Œè¿ç®—è§„åˆ™",
            "ç†è§£è¿ç»­å‡½æ•°çš„æ¦‚å¿µ",
            "æŒæ¡é—­åŒºé—´ä¸Šè¿ç»­å‡½æ•°çš„æ€§è´¨"
        ],
        "concepts": [
            {
                "name": "1.1 å‡½æ•°çš„æ¦‚å¿µ",
                "content": "å‡½æ•°æ˜¯ä»ä¸€ä¸ªé›†åˆåˆ°å¦ä¸€ä¸ªé›†åˆçš„å¯¹åº”å…³ç³»ã€‚è®¾Dä¸ºéç©ºæ•°é›†ï¼Œå¦‚æœå¯¹äºDä¸­çš„æ¯ä¸€ä¸ªæ•°xï¼ŒæŒ‰ç…§æŸä¸ªç¡®å®šçš„æ³•åˆ™fï¼Œéƒ½æœ‰å”¯ä¸€ç¡®å®šçš„æ•°yä¸ä¹‹å¯¹åº”ï¼Œåˆ™ç§°yæ˜¯xçš„å‡½æ•°ï¼Œè®°ä½œy=f(x)ã€‚"
            },
            {
                "name": "1.2 æé™çš„å®šä¹‰",
                "content": "è®¾å‡½æ•°f(x)åœ¨ç‚¹xâ‚€çš„æŸä¸ªå»å¿ƒé‚»åŸŸå†…æœ‰å®šä¹‰ï¼Œå¦‚æœå­˜åœ¨å¸¸æ•°Aï¼Œä½¿å¾—å¯¹äºä»»æ„ç»™å®šçš„Îµ>0ï¼Œéƒ½å­˜åœ¨Î´>0ï¼Œå½“0<|x-xâ‚€|<Î´æ—¶ï¼Œæœ‰|f(x)-A|<Îµï¼Œåˆ™ç§°Aä¸ºf(x)å½“xâ†’xâ‚€æ—¶çš„æé™ã€‚"
            },
            {
                "name": "1.3 è¿ç»­å‡½æ•°",
                "content": "è®¾å‡½æ•°f(x)åœ¨ç‚¹xâ‚€çš„æŸä¸ªé‚»åŸŸå†…æœ‰å®šä¹‰ï¼Œå¦‚æœlim(xâ†’xâ‚€)f(x)=f(xâ‚€)ï¼Œåˆ™ç§°f(x)åœ¨ç‚¹xâ‚€å¤„è¿ç»­ã€‚è¿ç»­å‡½æ•°çš„å›¾åƒæ˜¯ä¸€æ¡ä¸é—´æ–­çš„æ›²çº¿ã€‚"
            }
        ],
        "formulas": [
            {
                "name": "æé™çš„å››åˆ™è¿ç®—æ³•åˆ™",
                "latex": "\\lim_{x\\to x_0}[f(x)\\pm g(x)] = \\lim_{x\\to x_0}f(x) \\pm \\lim_{x\\to x_0}g(x)"
            },
            {
                "name": "é‡è¦æé™1",
                "latex": "\\lim_{x\\to 0}\\frac{\\sin x}{x} = 1"
            },
            {
                "name": "é‡è¦æé™2",
                "latex": "\\lim_{x\\to \\infty}\\left(1+\\frac{1}{x}\\right)^x = e"
            }
        ],
        "examples": [
            {
                "title": "ä¾‹é¢˜1ï¼šè®¡ç®—æé™",
                "question": "è®¡ç®— $\\lim_{x\\to 0}\\frac{\\sin 3x}{x}$",
                "solution": """
                <p><strong>è§£ï¼š</strong></p>
                <p>åˆ©ç”¨é‡è¦æé™ $\\lim_{x\\to 0}\\frac{\\sin x}{x} = 1$ï¼Œæˆ‘ä»¬æœ‰ï¼š</p>
                <p>$$\\lim_{x\\to 0}\\frac{\\sin 3x}{x} = \\lim_{x\\to 0}\\frac{\\sin 3x}{3x} \\cdot 3 = 3 \\cdot 1 = 3$$</p>
                <p><strong>ç­”æ¡ˆï¼š</strong>3</p>
                """
            },
            {
                "title": "ä¾‹é¢˜2ï¼šåˆ¤æ–­è¿ç»­æ€§",
                "question": "è®¨è®ºå‡½æ•° $f(x) = \\frac{x^2-1}{x-1}$ åœ¨ $x=1$ å¤„çš„è¿ç»­æ€§",
                "solution": """
                <p><strong>è§£ï¼š</strong></p>
                <p>é¦–å…ˆï¼Œå‡½æ•°åœ¨ $x=1$ å¤„æ— å®šä¹‰ï¼Œå› æ­¤ $x=1$ æ˜¯å‡½æ•°çš„é—´æ–­ç‚¹ã€‚</p>
                <p>åŒ–ç®€å‡½æ•°ï¼š$f(x) = \\frac{x^2-1}{x-1} = x+1$ï¼ˆå½“ $x\\neq 1$ æ—¶ï¼‰</p>
                <p>è®¡ç®—æé™ï¼š$\\lim_{x\\to 1}f(x) = \\lim_{x\\to 1}(x+1) = 2$</p>
                <p>ç”±äºæé™å­˜åœ¨ä½†å‡½æ•°åœ¨ $x=1$ å¤„æ— å®šä¹‰ï¼Œæ‰€ä»¥ $x=1$ æ˜¯å¯å»é—´æ–­ç‚¹ã€‚</p>
                <p><strong>ç»“è®ºï¼š</strong>å‡½æ•°åœ¨ $x=1$ å¤„ä¸è¿ç»­</p>
                """
            }
        ],
        "exercises": [
            {
                "question": "è®¡ç®— $\\lim_{x\\to 2}\\frac{x^2-4}{x-2}$",
                "answer": "4",
                "hint": "å…ˆåŒ–ç®€åˆ†å­"
            },
            {
                "question": "è®¡ç®— $\\lim_{x\\to 0}\\frac{1-\\cos x}{x^2}$",
                "answer": "1/2",
                "hint": "åˆ©ç”¨ç­‰ä»·æ— ç©·å°æ›¿æ¢"
            }
        ],
        "homework": [
            "æ•™æP25ï¼šä¹ é¢˜1.1 (1)-(4)",
            "æ•™æP32ï¼šä¹ é¢˜1.2 (1), (3), (5)",
            "æ•™æP38ï¼šä¹ é¢˜1.3 (2), (4), (6)",
            "æ€è€ƒé¢˜ï¼šè¯æ˜é—­åŒºé—´ä¸Šè¿ç»­å‡½æ•°çš„ä»‹å€¼å®šç†"
        ],
        "homework_score": 100
    },
    
    "ç¬¬äºŒç« ": {
        "title": "ç¬¬äºŒç« ï¼šå¯¼æ•°ä¸å¾®åˆ†",
        "volume": "ä¸Šå†Œ",
        "objectives": [
            "ç†è§£å¯¼æ•°çš„æ¦‚å¿µåŠå‡ ä½•æ„ä¹‰",
            "æŒæ¡å¯¼æ•°çš„å››åˆ™è¿ç®—æ³•åˆ™",
            "æŒæ¡å¤åˆå‡½æ•°çš„æ±‚å¯¼æ³•åˆ™",
            "ç†è§£å¾®åˆ†çš„æ¦‚å¿µåŠåº”ç”¨"
        ],
        "concepts": [
            {
                "name": "2.1 å¯¼æ•°çš„å®šä¹‰",
                "content": "è®¾å‡½æ•°y=f(x)åœ¨ç‚¹xâ‚€çš„æŸä¸ªé‚»åŸŸå†…æœ‰å®šä¹‰ï¼Œå¦‚æœæé™lim(xâ†’xâ‚€)[f(x)-f(xâ‚€)]/(x-xâ‚€)å­˜åœ¨ï¼Œåˆ™ç§°è¿™ä¸ªæé™å€¼ä¸ºå‡½æ•°f(x)åœ¨ç‚¹xâ‚€å¤„çš„å¯¼æ•°ï¼Œè®°ä½œf'(xâ‚€)ã€‚"
            },
            {
                "name": "2.2 å¯¼æ•°çš„å‡ ä½•æ„ä¹‰",
                "content": "å‡½æ•°y=f(x)åœ¨ç‚¹xâ‚€å¤„çš„å¯¼æ•°f'(xâ‚€)è¡¨ç¤ºæ›²çº¿y=f(x)åœ¨ç‚¹(xâ‚€, f(xâ‚€))å¤„çš„åˆ‡çº¿æ–œç‡ã€‚åˆ‡çº¿æ–¹ç¨‹ä¸ºï¼šy-f(xâ‚€)=f'(xâ‚€)(x-xâ‚€)"
            },
            {
                "name": "2.3 å¤åˆå‡½æ•°æ±‚å¯¼æ³•åˆ™",
                "content": "è®¾y=f(u)ï¼Œu=g(x)ï¼Œä¸”f(u)åœ¨uç‚¹å¯å¯¼ï¼Œg(x)åœ¨xç‚¹å¯å¯¼ï¼Œåˆ™å¤åˆå‡½æ•°y=f(g(x))åœ¨xç‚¹å¯å¯¼ï¼Œä¸”dy/dx=dy/duÂ·du/dxï¼Œè¿™å°±æ˜¯é“¾å¼æ³•åˆ™ã€‚"
            }
        ],
        "formulas": [
            {
                "name": "å¯¼æ•°å®šä¹‰",
                "latex": "f'(x_0) = \\lim_{x\\to x_0}\\frac{f(x)-f(x_0)}{x-x_0}"
            },
            {
                "name": "é“¾å¼æ³•åˆ™",
                "latex": "\\frac{dy}{dx} = \\frac{dy}{du} \\cdot \\frac{du}{dx}"
            },
            {
                "name": "ä¹˜ç§¯æ³•åˆ™",
                "latex": "(uv)' = u'v + uv'"
            },
            {
                "name": "å•†æ³•åˆ™",
                "latex": "\\left(\\frac{u}{v}\\right)' = \\frac{u'v - uv'}{v^2}"
            }
        ],
        "examples": [
            {
                "title": "ä¾‹é¢˜1ï¼šæ±‚å¯¼æ•°",
                "question": "æ±‚å‡½æ•° $f(x) = \\sin x^2$ çš„å¯¼æ•°",
                "solution": """
                <p><strong>è§£ï¼š</strong></p>
                <p>ä½¿ç”¨é“¾å¼æ³•åˆ™ï¼š</p>
                <p>è®¾ $u = x^2$ï¼Œåˆ™ $f(x) = \\sin u$</p>
                <p>$$f'(x) = \\cos u \\cdot u' = \\cos x^2 \\cdot 2x = 2x\\cos x^2$$</p>
                <p><strong>ç­”æ¡ˆï¼š</strong>$f'(x) = 2x\\cos x^2$</p>
                """
            },
            {
                "title": "ä¾‹é¢˜2ï¼šåº”ç”¨é¢˜",
                "question": "ä¸€ä¸ªçƒä½“åŠå¾„ä»¥ 0.5cm/s çš„é€Ÿåº¦å¢å¤§ï¼Œå½“åŠå¾„ä¸º 10cm æ—¶ï¼Œè¡¨é¢ç§¯å¢åŠ çš„é€Ÿåº¦æ˜¯å¤šå°‘ï¼Ÿ",
                "solution": """
                <p><strong>è§£ï¼š</strong></p>
                <p>çƒä½“è¡¨é¢ç§¯å…¬å¼ï¼š$S = 4\\pi r^2$</p>
                <p>å¯¹æ—¶é—´tæ±‚å¯¼ï¼š$\\frac{dS}{dt} = 8\\pi r \\cdot \\frac{dr}{dt}$</p>
                <p>å½“ $r=10$ cmï¼Œ$\\frac{dr}{dt}=0.5$ cm/s æ—¶ï¼š</p>
                <p>$$\\frac{dS}{dt} = 8\\pi \\cdot 10 \\cdot 0.5 = 40\\pi \\text{ cm}^2/\\text{s}$$</p>
                <p><strong>ç­”æ¡ˆï¼š</strong>è¡¨é¢ç§¯å¢åŠ çš„é€Ÿåº¦ä¸º $40\\pi$ cmÂ²/s</p>
                """
            }
        ],
        "exercises": [
            {
                "question": "æ±‚ $y = \\ln(\\cos x)$ çš„å¯¼æ•°",
                "answer": "-tan x",
                "hint": "ä½¿ç”¨é“¾å¼æ³•åˆ™"
            },
            {
                "question": "æ±‚ $y = e^{x^2}$ åœ¨ $x=0$ å¤„çš„åˆ‡çº¿æ–¹ç¨‹",
                "answer": "y=1",
                "hint": "å…ˆæ±‚å¯¼æ•°ï¼Œå†æ±‚åˆ‡çº¿æ–¹ç¨‹"
            }
        ],
        "homework": [
            "æ•™æP52ï¼šä¹ é¢˜2.1 (1)-(5)",
            "æ•™æP58ï¼šä¹ é¢˜2.2 (2), (4), (6), (8)",
            "æ•™æP65ï¼šä¹ é¢˜2.3 (1), (3), (5)",
            "åº”ç”¨é¢˜ï¼šåˆ†æä¸€ä¸ªå®é™…å˜åŒ–ç‡é—®é¢˜"
        ],
        "homework_score": 100
    },
    
    "ç¬¬ä¸‰ç« ": {
        "title": "ç¬¬ä¸‰ç« ï¼šå¾®åˆ†ä¸­å€¼å®šç†ä¸å¯¼æ•°çš„åº”ç”¨",
        "volume": "ä¸Šå†Œ",
        "objectives": [
            "æŒæ¡ç½—å°”å®šç†ã€æ‹‰æ ¼æœ—æ—¥ä¸­å€¼å®šç†",
            "ç†è§£æ´›å¿…è¾¾æ³•åˆ™åŠå…¶åº”ç”¨",
            "æŒæ¡å‡½æ•°çš„å•è°ƒæ€§åˆ¤åˆ«æ³•",
            "ç†è§£æ³°å‹’å…¬å¼"
        ],
        "concepts": [
            {
                "name": "3.1 ç½—å°”å®šç†",
                "content": "å¦‚æœå‡½æ•°f(x)åœ¨é—­åŒºé—´[a,b]ä¸Šè¿ç»­ï¼Œåœ¨å¼€åŒºé—´(a,b)å†…å¯å¯¼ï¼Œä¸”f(a)=f(b)ï¼Œåˆ™åœ¨å¼€åŒºé—´(a,b)å†…è‡³å°‘å­˜åœ¨ä¸€ç‚¹Î¾ï¼Œä½¿å¾—f'(Î¾)=0ã€‚"
            },
            {
                "name": "3.2 æ‹‰æ ¼æœ—æ—¥ä¸­å€¼å®šç†",
                "content": "å¦‚æœå‡½æ•°f(x)åœ¨é—­åŒºé—´[a,b]ä¸Šè¿ç»­ï¼Œåœ¨å¼€åŒºé—´(a,b)å†…å¯å¯¼ï¼Œåˆ™åœ¨å¼€åŒºé—´(a,b)å†…è‡³å°‘å­˜åœ¨ä¸€ç‚¹Î¾ï¼Œä½¿å¾—f'(Î¾)=[f(b)-f(a)]/(b-a)ã€‚"
            },
            {
                "name": "3.3 æ´›å¿…è¾¾æ³•åˆ™",
                "content": "å¦‚æœlim(xâ†’xâ‚€)f(x)=lim(xâ†’xâ‚€)g(x)=0ï¼ˆæˆ–âˆï¼‰ï¼Œä¸”f'(x)/g'(x)åœ¨xâ‚€çš„æŸå»å¿ƒé‚»åŸŸå†…æœ‰å®šä¹‰ï¼Œåˆ™lim(xâ†’xâ‚€)f(x)/g(x)=lim(xâ†’xâ‚€)f'(x)/g'(x)ï¼ˆå½“å³ç«¯æé™å­˜åœ¨æ—¶ï¼‰ã€‚"
            }
        ],
        "formulas": [
            {
                "name": "æ‹‰æ ¼æœ—æ—¥ä¸­å€¼å…¬å¼",
                "latex": "f(b) - f(a) = f'(\\xi)(b - a)"
            },
            {
                "name": "æŸ¯è¥¿ä¸­å€¼å…¬å¼",
                "latex": "\\frac{f(b)-f(a)}{g(b)-g(a)} = \\frac{f'(\\xi)}{g'(\\xi)}"
            },
            {
                "name": "æ³°å‹’å…¬å¼ï¼ˆéº¦å…‹åŠ³æ—å½¢å¼ï¼‰",
                "latex": "f(x) = f(0) + f'(0)x + \\frac{f''(0)}{2!}x^2 + \\cdots + \\frac{f^{(n)}(0)}{n!}x^n + o(x^n)"
            }
        ],
        "examples": [
            {
                "title": "ä¾‹é¢˜1ï¼šæ´›å¿…è¾¾æ³•åˆ™",
                "question": "è®¡ç®— $\\lim_{x\\to 0}\\frac{e^x - 1 - x}{x^2}$",
                "solution": """
                <p><strong>è§£ï¼š</strong></p>
                <p>è¿™æ˜¯ä¸€ä¸ª $\\frac{0}{0}$ å‹æé™ï¼Œä½¿ç”¨æ´›å¿…è¾¾æ³•åˆ™ï¼š</p>
                <p>$$\\lim_{x\\to 0}\\frac{e^x - 1 - x}{x^2} = \\lim_{x\\to 0}\\frac{e^x - 1}{2x} = \\lim_{x\\to 0}\\frac{e^x}{2} = \\frac{1}{2}$$</p>
                <p><strong>ç­”æ¡ˆï¼š</strong>$\\frac{1}{2}$</p>
                """
            }
        ],
        "exercises": [
            {
                "question": "è¯æ˜å‡½æ•° $f(x)=x^3-3x$ åœ¨åŒºé—´ $[0,2]$ ä¸Šæ»¡è¶³æ‹‰æ ¼æœ—æ—¥ä¸­å€¼å®šç†",
                "answer": "å­˜åœ¨ $\\xi=\\frac{2}{\\sqrt{3}}$",
                "hint": "éªŒè¯æ¡ä»¶å¹¶æ±‚ $\\xi$"
            }
        ],
        "homework": [
            "æ•™æP75ï¼šä¹ é¢˜3.1 (1)-(3)",
            "æ•™æP82ï¼šä¹ é¢˜3.2 (2), (4), (6)",
            "æ•™æP90ï¼šä¹ é¢˜3.3 (1), (3)"
        ],
        "homework_score": 100
    },
    
    "ç¬¬å››ç« ": {
        "title": "ç¬¬å››ç« ï¼šä¸å®šç§¯åˆ†",
        "volume": "ä¸Šå†Œ",
        "objectives": [
            "ç†è§£ä¸å®šç§¯åˆ†çš„æ¦‚å¿µ",
            "æŒæ¡åŸºæœ¬ç§¯åˆ†å…¬å¼",
            "æŒæ¡æ¢å…ƒç§¯åˆ†æ³•",
            "æŒæ¡åˆ†éƒ¨ç§¯åˆ†æ³•"
        ],
        "concepts": [
            {
                "name": "4.1 ä¸å®šç§¯åˆ†çš„å®šä¹‰",
                "content": "å¦‚æœåœ¨åŒºé—´Iä¸Šï¼ŒF'(x)=f(x)ï¼Œåˆ™ç§°F(x)ä¸ºf(x)åœ¨åŒºé—´Iä¸Šçš„ä¸€ä¸ªåŸå‡½æ•°ã€‚f(x)çš„æ‰€æœ‰åŸå‡½æ•°ç§°ä¸ºf(x)çš„ä¸å®šç§¯åˆ†ï¼Œè®°ä½œâˆ«f(x)dxã€‚"
            }
        ],
        "formulas": [
            {
                "name": "åŸºæœ¬ç§¯åˆ†å…¬å¼",
                "latex": "\\int x^n dx = \\frac{x^{n+1}}{n+1} + C \\quad (n \\neq -1)"
            },
            {
                "name": "æŒ‡æ•°å‡½æ•°ç§¯åˆ†",
                "latex": "\\int e^x dx = e^x + C"
            },
            {
                "name": "å¯¹æ•°å‡½æ•°ç§¯åˆ†",
                "latex": "\\int \\frac{1}{x} dx = \\ln|x| + C"
            },
            {
                "name": "åˆ†éƒ¨ç§¯åˆ†å…¬å¼",
                "latex": "\\int u dv = uv - \\int v du"
            }
        ],
        "examples": [
            {
                "title": "ä¾‹é¢˜1ï¼šåˆ†éƒ¨ç§¯åˆ†",
                "question": "è®¡ç®— $\\int x\\ln x dx$",
                "solution": """
                <p><strong>è§£ï¼š</strong></p>
                <p>è®¾ $u = \\ln x$ï¼Œ$dv = x dx$</p>
                <p>åˆ™ $du = \\frac{1}{x}dx$ï¼Œ$v = \\frac{x^2}{2}$</p>
                <p>$$\\int x\\ln x dx = \\frac{x^2}{2}\\ln x - \\int \\frac{x^2}{2} \\cdot \\frac{1}{x}dx$$</p>
                <p>$$= \\frac{x^2}{2}\\ln x - \\frac{1}{2}\\int x dx$$</p>
                <p>$$= \\frac{x^2}{2}\\ln x - \\frac{x^2}{4} + C$$</p>
                """
            }
        ],
        "exercises": [
            {
                "question": "è®¡ç®— $\\int \\sin^2 x dx$",
                "answer": "$\\frac{x}{2} - \\frac{\\sin 2x}{4} + C$",
                "hint": "ä½¿ç”¨äºŒå€è§’å…¬å¼"
            }
        ],
        "homework": [
            "æ•™æP100ï¼šä¹ é¢˜4.1 (1)-(6)",
            "æ•™æP108ï¼šä¹ é¢˜4.2 (2), (4), (6)",
            "æ•™æP115ï¼šä¹ é¢˜4.3 (1), (3), (5)"
        ],
        "homework_score": 100
    },
    
    "ç¬¬äº”ç« ": {
        "title": "ç¬¬äº”ç« ï¼šå®šç§¯åˆ†",
        "volume": "ä¸Šå†Œ",
        "objectives": [
            "ç†è§£å®šç§¯åˆ†çš„æ¦‚å¿µåŠå‡ ä½•æ„ä¹‰",
            "æŒæ¡å¾®ç§¯åˆ†åŸºæœ¬å…¬å¼",
            "æŒæ¡å®šç§¯åˆ†çš„è®¡ç®—æ–¹æ³•",
            "ç†è§£åå¸¸ç§¯åˆ†"
        ],
        "concepts": [
            {
                "name": "5.1 å®šç§¯åˆ†çš„å®šä¹‰",
                "content": "è®¾å‡½æ•°f(x)åœ¨åŒºé—´[a,b]ä¸Šæœ‰ç•Œï¼Œç”¨åˆ†ç‚¹a=xâ‚€<xâ‚<...<xâ‚™=bæŠŠåŒºé—´[a,b]åˆ†æˆnä¸ªå°åŒºé—´ï¼Œåœ¨æ¯ä¸ªå°åŒºé—´ä¸Šä»»å–ä¸€ç‚¹Î¾áµ¢ï¼Œä½œä¹˜ç§¯f(Î¾áµ¢)Î”xáµ¢ï¼Œæ±‚å’Œï¼Œå½“æœ€å¤§çš„å°åŒºé—´é•¿åº¦è¶‹äºé›¶æ—¶ï¼Œå¦‚æœå’Œçš„æé™å­˜åœ¨ï¼Œåˆ™ç§°è¿™ä¸ªæé™å€¼ä¸ºf(x)åœ¨[a,b]ä¸Šçš„å®šç§¯åˆ†ã€‚"
            }
        ],
        "formulas": [
            {
                "name": "å¾®ç§¯åˆ†åŸºæœ¬å…¬å¼",
                "latex": "\\int_a^b f(x)dx = F(b) - F(a)"
            },
            {
                "name": "ç‰›é¡¿-è±å¸ƒå°¼èŒ¨å…¬å¼",
                "latex": "\\frac{d}{dx}\\int_a^x f(t)dt = f(x)"
            }
        ],
        "examples": [
            {
                "title": "ä¾‹é¢˜1ï¼šè®¡ç®—å®šç§¯åˆ†",
                "question": "è®¡ç®— $\\int_0^1 x^2 dx$",
                "solution": """
                <p><strong>è§£ï¼š</strong></p>
                <p>$$\\int_0^1 x^2 dx = \\left.\\frac{x^3}{3}\\right|_0^1 = \\frac{1}{3} - 0 = \\frac{1}{3}$$</p>
                """
            }
        ],
        "exercises": [
            {
                "question": "è®¡ç®— $\\int_0^{\\pi} \\sin x dx$",
                "answer": "2",
                "hint": "ä½¿ç”¨å¾®ç§¯åˆ†åŸºæœ¬å…¬å¼"
            }
        ],
        "homework": [
            "æ•™æP130ï¼šä¹ é¢˜5.1 (1)-(4)",
            "æ•™æP138ï¼šä¹ é¢˜5.2 (2), (4), (6)"
        ],
        "homework_score": 100
    },
    
    "ç¬¬å…­ç« ": {
        "title": "ç¬¬å…­ç« ï¼šå¾®åˆ†æ–¹ç¨‹",
        "volume": "ä¸Šå†Œ",
        "objectives": [
            "ç†è§£å¾®åˆ†æ–¹ç¨‹çš„åŸºæœ¬æ¦‚å¿µ",
            "æŒæ¡å¯åˆ†ç¦»å˜é‡çš„å¾®åˆ†æ–¹ç¨‹",
            "æŒæ¡ä¸€é˜¶çº¿æ€§å¾®åˆ†æ–¹ç¨‹",
            "ç†è§£äºŒé˜¶å¸¸ç³»æ•°çº¿æ€§å¾®åˆ†æ–¹ç¨‹"
        ],
        "concepts": [
            {
                "name": "6.1 å¾®åˆ†æ–¹ç¨‹çš„æ¦‚å¿µ",
                "content": "å«æœ‰æœªçŸ¥å‡½æ•°åŠå…¶å¯¼æ•°çš„æ–¹ç¨‹ç§°ä¸ºå¾®åˆ†æ–¹ç¨‹ã€‚å¾®åˆ†æ–¹ç¨‹ä¸­å‡ºç°çš„æœªçŸ¥å‡½æ•°çš„å¯¼æ•°çš„æœ€é«˜é˜¶æ•°ç§°ä¸ºå¾®åˆ†æ–¹ç¨‹çš„é˜¶ã€‚"
            }
        ],
        "formulas": [
            {
                "name": "ä¸€é˜¶çº¿æ€§å¾®åˆ†æ–¹ç¨‹é€šè§£å…¬å¼",
                "latex": "y = e^{-\\int P(x)dx}\\left[\\int Q(x)e^{\\int P(x)dx}dx + C\\right]"
            }
        ],
        "examples": [
            {
                "title": "ä¾‹é¢˜1ï¼šå¯åˆ†ç¦»å˜é‡",
                "question": "æ±‚è§£ $\\frac{dy}{dx} = xy$",
                "solution": """
                <p><strong>è§£ï¼š</strong></p>
                <p>åˆ†ç¦»å˜é‡ï¼š$\\frac{dy}{y} = x dx$</p>
                <p>ä¸¤è¾¹ç§¯åˆ†ï¼š$\\ln|y| = \\frac{x^2}{2} + C_1$</p>
                <p>$$y = Ce^{x^2/2} \\quad (C = \\pm e^{C_1})$$</p>
                """
            }
        ],
        "exercises": [
            {
                "question": "æ±‚è§£ $\\frac{dy}{dx} = \\frac{x}{y}$",
                "answer": "$y^2 = x^2 + C$",
                "hint": "åˆ†ç¦»å˜é‡åç§¯åˆ†"
            }
        ],
        "homework": [
            "æ•™æP155ï¼šä¹ é¢˜6.1 (1)-(4)",
            "æ•™æP162ï¼šä¹ é¢˜6.2 (2), (4), (6)"
        ],
        "homework_score": 100
    },
    
    # ========== ä¸‹å†Œ ==========
    "ç¬¬ä¸ƒç« ": {
        "title": "ç¬¬ä¸ƒç« ï¼šå‘é‡ä»£æ•°ä¸ç©ºé—´è§£æå‡ ä½•",
        "volume": "ä¸‹å†Œ",
        "objectives": [
            "ç†è§£å‘é‡çš„æ¦‚å¿µåŠè¿ç®—",
            "æŒæ¡å‘é‡çš„æ•°é‡ç§¯ä¸å‘é‡ç§¯",
            "ç†è§£ç©ºé—´å¹³é¢å’Œç›´çº¿çš„æ–¹ç¨‹",
            "äº†è§£ç©ºé—´æ›²é¢"
        ],
        "concepts": [
            {
                "name": "7.1 å‘é‡çš„æ•°é‡ç§¯",
                "content": "å‘é‡aä¸å‘é‡bçš„æ•°é‡ç§¯å®šä¹‰ä¸ºaÂ·b=|a||b|cosÎ¸ï¼Œå…¶ä¸­Î¸ä¸ºä¸¤å‘é‡çš„å¤¹è§’ã€‚"
            },
            {
                "name": "7.2 å‘é‡çš„å‘é‡ç§¯",
                "content": "å‘é‡aä¸å‘é‡bçš„å‘é‡ç§¯è®°ä½œaÃ—bï¼Œå…¶å¤§å°ä¸º|aÃ—b|=|a||b|sinÎ¸ï¼Œæ–¹å‘å‚ç›´äºaå’Œbæ‰€ç¡®å®šçš„å¹³é¢ã€‚"
            }
        ],
        "formulas": [
            {
                "name": "æ•°é‡ç§¯åæ ‡å…¬å¼",
                "latex": "\\vec{a} \\cdot \\vec{b} = x_1x_2 + y_1y_2 + z_1z_2"
            },
            {
                "name": "å‘é‡ç§¯åæ ‡å…¬å¼",
                "latex": "\\vec{a} \\times \\vec{b} = \\begin{vmatrix} \\mathbf{i} & \\mathbf{j} & \\mathbf{k} \\\\ x_1 & y_1 & z_1 \\\\ x_2 & y_2 & z_2 \\end{vmatrix}"
            },
            {
                "name": "å¹³é¢çš„ä¸€èˆ¬æ–¹ç¨‹",
                "latex": "Ax + By + Cz + D = 0"
            },
            {
                "name": "ç›´çº¿çš„ç‚¹å‘å¼æ–¹ç¨‹",
                "latex": "\\frac{x-x_0}{m} = \\frac{y-y_0}{n} = \\frac{z-z_0}{p}"
            }
        ],
        "examples": [
            {
                "title": "ä¾‹é¢˜1ï¼šå‘é‡è¿ç®—",
                "question": "å·²çŸ¥ $\\vec{a}=(1,2,3)$ï¼Œ$\\vec{b}=(4,5,6)$ï¼Œæ±‚ $\\vec{a} \\cdot \\vec{b}$ å’Œ $\\vec{a} \\times \\vec{b}$",
                "solution": """
                <p><strong>è§£ï¼š</strong></p>
                <p>æ•°é‡ç§¯ï¼š$$\\vec{a} \\cdot \\vec{b} = 1\\times4 + 2\\times5 + 3\\times6 = 4 + 10 + 18 = 32$$</p>
                <p>å‘é‡ç§¯ï¼š</p>
                <p>$$\\vec{a} \\times \\vec{b} = \\begin{vmatrix} \\mathbf{i} & \\mathbf{j} & \\mathbf{k} \\\\ 1 & 2 & 3 \\\\ 4 & 5 & 6 \\end{vmatrix} = -3\\mathbf{i} + 6\\mathbf{j} - 3\\mathbf{k} = (-3, 6, -3)$$</p>
                """
            }
        ],
        "exercises": [
            {
                "question": "æ±‚ç‚¹(1,2,3)åˆ°å¹³é¢ $x+2y+2z-10=0$ çš„è·ç¦»",
                "answer": "2",
                "hint": "ä½¿ç”¨ç‚¹åˆ°å¹³é¢çš„è·ç¦»å…¬å¼"
            }
        ],
        "homework": [
            "æ•™æP180ï¼šä¹ é¢˜7.1 (1)-(4)",
            "æ•™æP188ï¼šä¹ é¢˜7.2 (2), (4), (6)",
            "æ•™æP195ï¼šä¹ é¢˜7.3 (1), (3), (5)"
        ],
        "homework_score": 100
    },
    
    "ç¬¬å…«ç« ": {
        "title": "ç¬¬å…«ç« ï¼šå¤šå…ƒå‡½æ•°å¾®åˆ†æ³•åŠå…¶åº”ç”¨",
        "volume": "ä¸‹å†Œ",
        "objectives": [
            "ç†è§£å¤šå…ƒå‡½æ•°çš„æ¦‚å¿µ",
            "æŒæ¡åå¯¼æ•°çš„è®¡ç®—",
            "ç†è§£å…¨å¾®åˆ†çš„æ¦‚å¿µ",
            "æŒæ¡å¤šå…ƒå‡½æ•°æå€¼çš„æ±‚æ³•"
        ],
        "concepts": [
            {
                "name": "8.1 åå¯¼æ•°",
                "content": "è®¾å‡½æ•°z=f(x,y)åœ¨ç‚¹(xâ‚€,yâ‚€)çš„æŸä¸ªé‚»åŸŸå†…æœ‰å®šä¹‰ï¼Œå›ºå®šy=yâ‚€ï¼Œå¦‚æœä¸€å…ƒå‡½æ•°f(x,yâ‚€)åœ¨xâ‚€å¤„å¯å¯¼ï¼Œåˆ™ç§°è¿™ä¸ªå¯¼æ•°ä¸ºz=f(x,y)åœ¨ç‚¹(xâ‚€,yâ‚€)å¤„å¯¹xçš„åå¯¼æ•°ã€‚"
            }
        ],
        "formulas": [
            {
                "name": "å…¨å¾®åˆ†å…¬å¼",
                "latex": "dz = \\frac{\\partial z}{\\partial x}dx + \\frac{\\partial z}{\\partial y}dy"
            },
            {
                "name": "é“¾å¼æ³•åˆ™ï¼ˆå¤šå…ƒï¼‰",
                "latex": "\\frac{dz}{dt} = \\frac{\\partial z}{\\partial x}\\frac{dx}{dt} + \\frac{\\partial z}{\\partial y}\\frac{dy}{dt}"
            }
        ],
        "examples": [
            {
                "title": "ä¾‹é¢˜1ï¼šæ±‚åå¯¼æ•°",
                "question": "æ±‚ $z = x^2 + y^2$ çš„åå¯¼æ•° $\\frac{\\partial z}{\\partial x}$ å’Œ $\\frac{\\partial z}{\\partial y}$",
                "solution": """
                <p><strong>è§£ï¼š</strong></p>
                <p>$$\\frac{\\partial z}{\\partial x} = 2x$$</p>
                <p>$$\\frac{\\partial z}{\\partial y} = 2y$$</p>
                """
            }
        ],
        "exercises": [
            {
                "question": "æ±‚ $z = \\ln(x+y)$ çš„å…¨å¾®åˆ†",
                "answer": "$dz = \\frac{dx+dy}{x+y}$",
                "hint": "å…ˆæ±‚åå¯¼æ•°ï¼Œå†å†™å…¨å¾®åˆ†"
            }
        ],
        "homework": [
            "æ•™æP210ï¼šä¹ é¢˜8.1 (1)-(4)",
            "æ•™æP218ï¼šä¹ é¢˜8.2 (2), (4), (6)"
        ],
        "homework_score": 100
    },
    
    "ç¬¬ä¹ç« ": {
        "title": "ç¬¬ä¹ç« ï¼šé‡ç§¯åˆ†",
        "volume": "ä¸‹å†Œ",
        "objectives": [
            "ç†è§£äºŒé‡ç§¯åˆ†çš„æ¦‚å¿µ",
            "æŒæ¡äºŒé‡ç§¯åˆ†çš„è®¡ç®—æ–¹æ³•",
            "ç†è§£ä¸‰é‡ç§¯åˆ†çš„æ¦‚å¿µ",
            "äº†è§£é‡ç§¯åˆ†çš„åº”ç”¨"
        ],
        "concepts": [
            {
                "name": "9.1 äºŒé‡ç§¯åˆ†",
                "content": "äºŒé‡ç§¯åˆ†æ˜¯å®šç§¯åˆ†åœ¨äºŒå…ƒå‡½æ•°ä¸Šçš„æ¨å¹¿ï¼Œç”¨äºè®¡ç®—æ›²é¡¶æŸ±ä½“çš„ä½“ç§¯ç­‰ã€‚"
            }
        ],
        "formulas": [
            {
                "name": "äºŒé‡ç§¯åˆ†åŒ–ä¸ºäºŒæ¬¡ç§¯åˆ†",
                "latex": "\\iint_D f(x,y)dxdy = \\int_a^b dx\\int_{\\varphi_1(x)}^{\\varphi_2(x)} f(x,y)dy"
            },
            {
                "name": "æåæ ‡ä¸‹äºŒé‡ç§¯åˆ†",
                "latex": "\\iint_D f(x,y)dxdy = \\iint_{D^*} f(\\rho\\cos\\theta, \\rho\\sin\\theta)\\rho d\\rho d\\theta"
            }
        ],
        "examples": [
            {
                "title": "ä¾‹é¢˜1ï¼šè®¡ç®—äºŒé‡ç§¯åˆ†",
                "question": "è®¡ç®— $\\iint_D (x+y)dxdy$ï¼Œå…¶ä¸­Dæ˜¯ç”±x=0ï¼Œy=0ï¼Œx+y=1å›´æˆçš„åŒºåŸŸ",
                "solution": """
                <p><strong>è§£ï¼š</strong></p>
                <p>å°†Dè¡¨ç¤ºä¸ºï¼š$0 \\leq x \\leq 1$ï¼Œ$0 \\leq y \\leq 1-x$</p>
                <p>$$\\iint_D (x+y)dxdy = \\int_0^1 dx\\int_0^{1-x} (x+y)dy$$</p>
                <p>$$= \\int_0^1 \\left[xy + \\frac{y^2}{2}\\right]_0^{1-x} dx = \\int_0^1 \\left[x(1-x) + \\frac{(1-x)^2}{2}\\right]dx$$</p>
                <p>$$= \\frac{1}{3}$$</p>
                """
            }
        ],
        "exercises": [
            {
                "question": "è®¡ç®— $\\iint_D xy dxdy$ï¼Œå…¶ä¸­Dï¼š$0 \\leq x \\leq 1$ï¼Œ$0 \\leq y \\leq 2$",
                "answer": "1",
                "hint": "ç›´æ¥è®¡ç®—äºŒæ¬¡ç§¯åˆ†"
            }
        ],
        "homework": [
            "æ•™æP240ï¼šä¹ é¢˜9.1 (1)-(4)",
            "æ•™æP248ï¼šä¹ é¢˜9.2 (2), (4), (6)"
        ],
        "homework_score": 100
    },
    
    "ç¬¬åç« ": {
        "title": "ç¬¬åç« ï¼šæ›²çº¿ç§¯åˆ†ä¸æ›²é¢ç§¯åˆ†",
        "volume": "ä¸‹å†Œ",
        "objectives": [
            "ç†è§£ç¬¬ä¸€å‹æ›²çº¿ç§¯åˆ†",
            "ç†è§£ç¬¬äºŒå‹æ›²çº¿ç§¯åˆ†",
            "æŒæ¡æ ¼æ—å…¬å¼",
            "äº†è§£æ›²é¢ç§¯åˆ†"
        ],
        "concepts": [
            {
                "name": "10.1 æ ¼æ—å…¬å¼",
                "content": "è®¾å¹³é¢é—­åŒºåŸŸDç”±åˆ†æ®µå…‰æ»‘çš„é—­æ›²çº¿Lå›´æˆï¼Œå‡½æ•°P(x,y)å’ŒQ(x,y)åœ¨Dä¸Šå…·æœ‰ä¸€é˜¶è¿ç»­åå¯¼æ•°ï¼Œåˆ™âˆ®_L Pdx+Qdy = âˆ¬_D (âˆ‚Q/âˆ‚x - âˆ‚P/âˆ‚y)dxdy"
            }
        ],
        "formulas": [
            {
                "name": "æ ¼æ—å…¬å¼",
                "latex": "\\oint_L Pdx + Qdy = \\iint_D \\left(\\frac{\\partial Q}{\\partial x} - \\frac{\\partial P}{\\partial y}\\right)dxdy"
            }
        ],
        "examples": [
            {
                "title": "ä¾‹é¢˜1ï¼šæ ¼æ—å…¬å¼",
                "question": "è®¡ç®— $\\oint_L (x+y)dx - (x-y)dy$ï¼Œå…¶ä¸­Læ˜¯åœ†å‘¨ $x^2+y^2=R^2$ å–æ­£å‘",
                "solution": """
                <p><strong>è§£ï¼š</strong></p>
                <p>ä½¿ç”¨æ ¼æ—å…¬å¼ï¼šP=x+yï¼ŒQ=-(x-y)</p>
                <p>$$\\frac{\\partial Q}{\\partial x} - \\frac{\\partial P}{\\partial y} = -1 - 1 = -2$$</p>
                <p>$$\\oint_L (x+y)dx - (x-y)dy = \\iint_D (-2)dxdy = -2\\pi R^2$$</p>
                """
            }
        ],
        "exercises": [
            {
                "question": "éªŒè¯æ ¼æ—å…¬å¼è®¡ç®— $\\oint_L 2xydx + x^2dy$ï¼Œå…¶ä¸­Læ˜¯çŸ©å½¢è¾¹ç•Œ",
                "answer": "0",
                "hint": "éªŒè¯På’ŒQæ»¡è¶³æ ¼æ—å…¬å¼çš„æ¡ä»¶"
            }
        ],
        "homework": [
            "æ•™æP270ï¼šä¹ é¢˜10.1 (1)-(4)",
            "æ•™æP278ï¼šä¹ é¢˜10.2 (2), (4)"
        ],
        "homework_score": 100
    },
    
    "ç¬¬åä¸€ç« ": {
        "title": "ç¬¬åä¸€ç« ï¼šæ— ç©·çº§æ•°",
        "volume": "ä¸‹å†Œ",
        "objectives": [
            "ç†è§£å¸¸æ•°é¡¹çº§æ•°çš„æ¦‚å¿µ",
            "æŒæ¡çº§æ•°æ”¶æ•›çš„åˆ¤åˆ«æ³•",
            "ç†è§£å¹‚çº§æ•°çš„æ¦‚å¿µ",
            "äº†è§£å‡½æ•°å±•å¼€æˆå¹‚çº§æ•°"
        ],
        "concepts": [
            {
                "name": "11.1 çº§æ•°æ”¶æ•›",
                "content": "å¦‚æœçº§æ•°âˆ‘â‚™â‚Œâ‚^âˆuâ‚™çš„éƒ¨åˆ†å’Œæ•°åˆ—{Sâ‚™}æ”¶æ•›äºSï¼Œåˆ™ç§°çº§æ•°æ”¶æ•›ï¼Œå…¶å’Œä¸ºSã€‚å¦åˆ™ç§°çº§æ•°å‘æ•£ã€‚"
            }
        ],
        "formulas": [
            {
                "name": "ç­‰æ¯”çº§æ•°",
                "latex": "\\sum_{n=0}^{\\infty} q^n = \\frac{1}{1-q} \\quad (|q| < 1)"
            },
            {
                "name": "eçš„å±•å¼€å¼",
                "latex": "e^x = 1 + x + \\frac{x^2}{2!} + \\frac{x^3}{3!} + \\cdots = \\sum_{n=0}^{\\infty} \\frac{x^n}{n!}"
            },
            {
                "name": "sin xçš„å±•å¼€å¼",
                "latex": "\\sin x = x - \\frac{x^3}{3!} + \\frac{x^5}{5!} - \\cdots = \\sum_{n=0}^{\\infty} \\frac{(-1)^n x^{2n+1}}{(2n+1)!}"
            }
        ],
        "examples": [
            {
                "title": "ä¾‹é¢˜1ï¼šåˆ¤æ–­æ”¶æ•›æ€§",
                "question": "åˆ¤æ–­çº§æ•° $\\sum_{n=1}^{\\infty} \\frac{1}{n(n+1)}$ çš„æ”¶æ•›æ€§",
                "solution": """
                <p><strong>è§£ï¼š</strong></p>
                <p>éƒ¨åˆ†å’Œï¼š$S_n = 1 - \\frac{1}{2} + \\frac{1}{2} - \\frac{1}{3} + \\cdots + \\frac{1}{n} - \\frac{1}{n+1} = 1 - \\frac{1}{n+1}$</p>
                <p>$$\\lim_{n\\to\\infty} S_n = \\lim_{n\\to\\infty} \\left(1 - \\frac{1}{n+1}\\right) = 1$$</p>
                <p><strong>ç»“è®ºï¼š</strong>çº§æ•°æ”¶æ•›ï¼Œå…¶å’Œä¸º1</p>
                """
            }
        ],
        "exercises": [
            {
                "question": "åˆ¤æ–­çº§æ•° $\\sum_{n=1}^{\\infty} \\frac{1}{2^n}$ çš„æ”¶æ•›æ€§ï¼Œè‹¥æ”¶æ•›åˆ™æ±‚å’Œ",
                "answer": "æ”¶æ•›ï¼Œå’Œä¸º1",
                "hint": "è¿™æ˜¯ç­‰æ¯”çº§æ•°"
            }
        ],
        "homework": [
            "æ•™æP300ï¼šä¹ é¢˜11.1 (1)-(4)",
            "æ•™æP308ï¼šä¹ é¢˜11.2 (2), (4), (6)"
        ],
        "homework_score": 100
    },
    
    "ç¬¬åäºŒç« ": {
        "title": "ç¬¬åäºŒç« ï¼šå¾®åˆ†å‡ ä½•åˆæ­¥",
        "volume": "ä¸‹å†Œ",
        "objectives": [
            "ç†è§£å‘é‡å‡½æ•°çš„å¾®åˆ†",
            "äº†è§£ç©ºé—´æ›²çº¿çš„æ›²ç‡",
            "äº†è§£ç©ºé—´æ›²é¢ç†è®º"
        ],
        "concepts": [
            {
                "name": "12.1 æ›²ç‡",
                "content": "æ›²ç‡æ˜¯æè¿°æ›²çº¿å¼¯æ›²ç¨‹åº¦çš„é‡ï¼Œæ›²ç‡è¶Šå¤§ï¼Œæ›²çº¿å¼¯æ›²å¾—è¶Šå‰å®³ã€‚"
            }
        ],
        "formulas": [
            {
                "name": "æ›²ç‡å…¬å¼",
                "latex": "\\kappa = \\frac{|y''|}{(1+y'^2)^{3/2}}"
            }
        ],
        "examples": [
            {
                "title": "ä¾‹é¢˜1ï¼šè®¡ç®—æ›²ç‡",
                "question": "æ±‚æŠ›ç‰©çº¿ $y=x^2$ åœ¨ $x=0$ å¤„çš„æ›²ç‡",
                "solution": """
                <p><strong>è§£ï¼š</strong></p>
                <p>$y' = 2x$ï¼Œ$y'' = 2$</p>
                <p>åœ¨ $x=0$ å¤„ï¼š$y'=0$ï¼Œ$y''=2$</p>
                <p>$$\\kappa = \\frac{|2|}{(1+0)^{3/2}} = 2$$</p>
                """
            }
        ],
        "exercises": [
            {
                "question": "æ±‚ç›´çº¿ $y=ax+b$ çš„æ›²ç‡",
                "answer": "0",
                "hint": "ç›´çº¿ä¸å¼¯æ›²"
            }
        ],
        "homework": [
            "æ•™æP330ï¼šä¹ é¢˜12.1 (1)-(3)",
            "æ•™æP335ï¼šä¹ é¢˜12.2 (1), (2)"
        ],
        "homework_score": 100
    }
}

# è·å–è¾“å…¥å‚æ•°
volume = "${{ github.event.inputs.volume }}"
chapter_input = "${{ github.event.inputs.chapter }}"
difficulty = "${{ github.event.inputs.difficulty }}"
include_exercises = "${{ github.event.inputs.include_exercises }}" == "true"
include_homework = "${{ github.event.inputs.include_homework }}" == "true"
enable_notes = "${{ github.event.inputs.enable_notes }}" == "true"

# è·å–ç« èŠ‚æ¨¡æ¿
template = chapter_templates.get(chapter_input)
if not template:
    print(f"é”™è¯¯ï¼šæœªæ‰¾åˆ°ç« èŠ‚ {chapter_input} çš„æ¨¡æ¿")
    exit(1)

# ç”Ÿæˆç™½æ¿HTML
timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
filename = f"whiteboard_{chapter_input}_{difficulty}_{timestamp}.html"

html_content = f"""<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{template['title']} - è¯¾å ‚ç™½æ¿</title>
    <style>
        * {{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }}
        
        body {{
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: #f5f7fa;
            padding: 20px;
            line-height: 1.8;
        }}
        
        .whiteboard {{
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }}
        
        .header {{
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 40px;
        }}
        
        .header h1 {{
            font-size: 28px;
            margin-bottom: 10px;
        }}
        
        .header .meta {{
            font-size: 14px;
            opacity: 0.9;
        }}
        
        .content {{
            padding: 40px;
        }}
        
        .section {{
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 2px solid #f0f0f0;
        }}
        
        .section:last-child {{
            border-bottom: none;
        }}
        
        .section h2 {{
            font-size: 20px;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }}
        
        .concept {{
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
        }}
        
        .concept h3 {{
            font-size: 16px;
            color: #667eea;
            margin-bottom: 10px;
        }}
        
        .concept p {{
            color: #666;
            font-size: 14px;
        }}
        
        .formula-box {{
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }}
        
        .formula-box h4 {{
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }}
        
        .example {{
            background: #fff;
            padding: 25px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
            margin-bottom: 15px;
        }}
        
        .example h4 {{
            font-size: 16px;
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }}
        
        .exercise {{
            background: #f0f7ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
        }}
        
        .exercise h4 {{
            font-size: 15px;
            color: #333;
            margin-bottom: 10px;
            font-weight: 600;
        }}
        
        .exercise .hint {{
            font-size: 13px;
            color: #666;
            margin-top: 10px;
            padding: 10px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 5px;
        }}
        
        .homework {{
            background: #fff8e1;
            padding: 25px;
            border-radius: 10px;
        }}
        
        .homework h4 {{
            font-size: 16px;
            color: #f57c00;
            margin-bottom: 15px;
            font-weight: 600;
        }}
        
        .homework ol {{
            margin-left: 20px;
            color: #666;
        }}
        
        .homework li {{
            margin-bottom: 10px;
            font-size: 14px;
        }}
        
        .notes-section {{
            background: #f5f5f5;
            padding: 30px;
            border-radius: 10px;
            margin-top: 30px;
        }}
        
        .notes-section h2 {{
            font-size: 18px;
            color: #333;
            margin-bottom: 15px;
        }}
        
        .notes-section textarea {{
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
        }}
        
        .notes-section textarea:focus {{
            outline: none;
            border-color: #667eea;
        }}
        
        .notes-buttons {{
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }}
        
        .notes-buttons button {{
            padding: 10px 25px;
            border: none;
            border-radius: 8px;
            background: #667eea;
            color: white;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }}
        
        .notes-buttons button:hover {{
            background: #764ba2;
        }}
        
        .notes-buttons button.secondary {{
            background: #e0e0e0;
            color: #666;
        }}
        
        .notes-buttons button.secondary:hover {{
            background: #d0d0d0;
        }}
        
        @media print {{
            body {{
                background: white;
                padding: 0;
            }}
            
            .notes-section {{
                display: none;
            }}
        }}
        
        @media (max-width: 768px) {{
            .content {{
                padding: 20px;
            }}
            
            .header {{
                padding: 20px;
            }}
            
            .header h1 {{
                font-size: 22px;
            }}
        }}
    </style>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <div class="whiteboard">
        <div class="header">
            <h1>{template['title']}</h1>
            <div class="meta">
                éš¾åº¦ç­‰çº§ï¼š{difficulty} | ç”Ÿæˆæ—¶é—´ï¼š{datetime.now().strftime('%Y-%m-%d %H:%M:%S')}
            </div>
        </div>
        
        <div class="content">
            <!-- å­¦ä¹ ç›®æ ‡ -->
            <div class="section">
                <h2>ğŸ“š å­¦ä¹ ç›®æ ‡</h2>
                <ul style="margin-left: 20px; color: #666;">
"""

# æ·»åŠ å­¦ä¹ ç›®æ ‡
for obj in template['objectives']:
    html_content += f"                    <li>{obj}</li>\n"

html_content += """                </ul>
            </div>
            
            <!-- æ ¸å¿ƒæ¦‚å¿µ -->
            <div class="section">
                <h2>ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ</h2>
"""

# æ·»åŠ æ ¸å¿ƒæ¦‚å¿µ
for concept in template['concepts']:
    html_content += f"""
                <div class="concept">
                    <h3>{concept['name']}</h3>
                    <p>{concept['content']}</p>
                </div>
"""

html_content += """            </div>
            
            <!-- é‡è¦å…¬å¼ -->
            <div class="section">
                <h2>ğŸ“ é‡è¦å…¬å¼</h2>
"""

# æ·»åŠ å…¬å¼
for formula in template['formulas']:
    html_content += f"""
                <div class="formula-box">
                    <h4>{formula['name']}</h4>
                    $${formula['latex']}$$
                </div>
"""

html_content += """            </div>
            
            <!-- å…¸å‹ä¾‹é¢˜ -->
            <div class="section">
                <h2>ğŸ“ å…¸å‹ä¾‹é¢˜</h2>
"""

# æ·»åŠ ä¾‹é¢˜
for example in template['examples']:
    html_content += f"""
                <div class="example">
                    <h4>{example['title']}</h4>
                    <p style="margin-bottom: 15px;"><strong>é¢˜ç›®ï¼š</strong>{example['question']}</p>
                    {example['solution']}
                </div>
"""

html_content += """            </div>
"""

# æ·»åŠ è¯¾å ‚ç»ƒä¹ 
if include_exercises:
    html_content += """            <!-- è¯¾å ‚ç»ƒä¹  -->
            <div class="section">
                <h2>âœï¸ è¯¾å ‚ç»ƒä¹ </h2>
"""
    
    for i, exercise in enumerate(template['exercises'], 1):
        html_content += f"""
                <div class="exercise">
                    <h4>ç»ƒä¹ {i}</h4>
                    <p><strong>é¢˜ç›®ï¼š</strong>{exercise['question']}</p>
                    <details>
                        <summary style="cursor: pointer; color: #667eea;">æŸ¥çœ‹ç­”æ¡ˆ</summary>
                        <p style="margin-top: 15px;"><strong>ç­”æ¡ˆï¼š</strong>{exercise['answer']}</p>
                        <div class="hint">ğŸ’¡ æç¤ºï¼š{exercise['hint']}</div>
                    </details>
                </div>
"""
    
    html_content += """            </div>
"""

# æ·»åŠ è¯¾åä½œä¸š
if include_homework:
    html_content += f"""            <!-- è¯¾åä½œä¸š -->
            <div class="section">
                <h2>ğŸ“– è¯¾åä½œä¸š</h2>
                <div class="homework">
                    <h4>ä½œä¸šæ¸…å•</h4>
                    <ol>
"""
    
    for hw in template['homework']:
        html_content += f"                        <li>{hw}</li>\n"
    
    html_content += f"""                    </ol>
                    <p style="margin-top: 20px;"><strong>ä½œä¸šæ»¡åˆ†ï¼š</strong>{template['homework_score']}åˆ†</p>
                    <p style="margin-top: 10px;"><strong>æäº¤æ—¶é—´ï¼š</strong>ä¸‹å‘¨ä¸€å‰</p>
                </div>
            </div>
"""

# æ·»åŠ å­¦ç”Ÿç¬”è®°åŠŸèƒ½
if enable_notes:
    html_content += f"""            <!-- å­¦ç”Ÿç¬”è®° -->
            <div class="notes-section">
                <h2>ğŸ“Œ å­¦ç”Ÿç¬”è®°</h2>
                <textarea id="studentNotes" placeholder="åœ¨è¿™é‡Œè®°å½•ä½ çš„è¯¾å ‚ç¬”è®°..."></textarea>
                <div class="notes-buttons">
                    <button onclick="saveNotes()">ğŸ’¾ ä¿å­˜ç¬”è®°</button>
                    <button class="secondary" onclick="exportNotes()">ğŸ“¥ å¯¼å‡ºç¬”è®°</button>
                    <button class="secondary" onclick="clearNotes()">ğŸ—‘ï¸ æ¸…ç©ºç¬”è®°</button>
                </div>
            </div>
            
            <script>
                // ä¿å­˜ç¬”è®°åˆ°æœ¬åœ°å­˜å‚¨
                function saveNotes() {{
                    const notes = document.getElementById('studentNotes').value;
                    localStorage.setItem('notes_{chapter_input}_{timestamp}', notes);
                    alert('ç¬”è®°å·²ä¿å­˜ï¼');
                }}
                
                // å¯¼å‡ºç¬”è®°ä¸ºæ–‡æœ¬æ–‡ä»¶
                function exportNotes() {{
                    const notes = document.getElementById('studentNotes').value;
                    const blob = new Blob([notes], {{type: 'text/plain'}});
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'ç¬”è®°_{chapter_input}_{timestamp}.txt';
                    a.click();
                    URL.revokeObjectURL(url);
                }}
                
                // æ¸…ç©ºç¬”è®°
                function clearNotes() {{
                    if (confirm('ç¡®å®šè¦æ¸…ç©ºç¬”è®°å—ï¼Ÿ')) {{
                        document.getElementById('studentNotes').value = '';
                        localStorage.removeItem('notes_{chapter_input}_{timestamp}');
                    }}
                }}
                
                // é¡µé¢åŠ è½½æ—¶æ¢å¤ç¬”è®°
                window.onload = function() {{
                    const savedNotes = localStorage.getItem('notes_{chapter_input}_{timestamp}');
                    if (savedNotes) {{
                        document.getElementById('studentNotes').value = savedNotes;
                    }}
                }};
                
                // è‡ªåŠ¨ä¿å­˜ç¬”è®°ï¼ˆæ¯30ç§’ï¼‰
                setInterval(saveNotes, 30000);
            </script>
"""

html_content += """
        </div>
    </div>
</body>
</html>
"""

# ä¿å­˜æ–‡ä»¶
save_path = f"data/whiteboards/{volume.lower()}/{filename}"
with open(save_path, 'w', encoding='utf-8') as f:
    f.write(html_content)

print(f"ç™½æ¿å·²ç”Ÿæˆï¼š{save_path}")

# ç”Ÿæˆå…ƒæ•°æ®
metadata = {
    "title": template['title'],
    "volume": volume,
    "chapter": chapter_input,
    "difficulty": difficulty,
    "filename": filename,
    "timestamp": datetime.now().isoformat(),
    "path": save_path,
    "features": {
        "exercises": include_exercises,
        "homework": include_homework,
        "notes": enable_notes
    }
}

metadata_path = f"data/whiteboards/{volume.lower()}/metadata_{chapter_input}_{timestamp}.json"
with open(metadata_path, 'w', encoding='utf-8') as f:
    json.dump(metadata, f, ensure_ascii=False, indent=2)

print(f"å…ƒæ•°æ®å·²ç”Ÿæˆï¼š{metadata_path}")
PYTHON_SCRIPT
      
      - name: æäº¤ç™½æ¿æ–‡ä»¶
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add data/whiteboards/
          git commit -m "ç”Ÿæˆè¯¾å ‚ç™½æ¿ï¼š${{ github.event.inputs.chapter }} - ${{ github.event.inputs.difficulty }}"
          git push
      
      - name: ç”Ÿæˆç™½æ¿ç´¢å¼•
        run: python3 << 'PYTHON_SCRIPT'
import os
import json
from datetime import datetime

# æ‰«ææ‰€æœ‰ç™½æ¿æ–‡ä»¶
whiteboards = []
for volume in ['volume1', 'volume2']:
    volume_path = f"data/whiteboards/{volume}"
    if os.path.exists(volume_path):
        for file in os.listdir(volume_path):
            if file.endswith('.json') and file.startswith('metadata_'):
                with open(os.path.join(volume_path, file), 'r', encoding='utf-8') as f:
                    metadata = json.load(f)
                    whiteboards.append(metadata)

# ç”Ÿæˆç´¢å¼•HTML
index_html = """<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯¾å ‚ç™½æ¿ç´¢å¼•</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'PingFang SC', sans-serif; background: #f5f7fa; padding: 30px; }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { color: #333; margin-bottom: 30px; }
        .volume-section { margin-bottom: 40px; }
        .volume-title { font-size: 24px; color: #667eea; margin-bottom: 20px; }
        .whiteboard-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .whiteboard-card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.3s; }
        .whiteboard-card:hover { transform: translateY(-5px); }
        .whiteboard-title { font-size: 16px; font-weight: 600; color: #333; margin-bottom: 10px; }
        .whiteboard-meta { font-size: 13px; color: #666; margin-bottom: 15px; }
        .whiteboard-link { display: inline-block; padding: 8px 20px; background: #667eea; color: white; text-decoration: none; border-radius: 5px; font-size: 14px; }
        .whiteboard-link:hover { background: #764ba2; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“š è¯¾å ‚ç™½æ¿ç´¢å¼•</h1>
        <p style="margin-bottom: 30px; color: #666;">å…±ç”Ÿæˆ """ + str(len(whiteboards)) + """ ä¸ªç™½æ¿</p>
"""

# æŒ‰æ•™æåˆ†ç»„
volume1_boards = [wb for wb in whiteboards if wb['volume'] == 'ä¸Šå†Œ']
volume2_boards = [wb for wb in whiteboards if wb['volume'] == 'ä¸‹å†Œ']

# ä¸Šå†Œ
if volume1_boards:
    index_html += """
        <div class="volume-section">
            <h2 class="volume-title">ğŸ“˜ é«˜ç­‰æ•°å­¦ï¼ˆä¸Šå†Œï¼‰</h2>
            <div class="whiteboard-grid">
"""
    for wb in volume1_boards:
        file_url = f"https://{os.environ.get('GITHUB_REPOSITORY_OWNER', 'your-username')}.github.io/math-teaching-system/data/whiteboards/volume1/{wb['filename']}"
        index_html += f"""
                <div class="whiteboard-card">
                    <div class="whiteboard-title">{wb['title']}</div>
                    <div class="whiteboard-meta">
                        éš¾åº¦ï¼š{wb['difficulty']}<br>
                        ç”Ÿæˆæ—¶é—´ï¼š{wb['timestamp'][:10]}
                    </div>
                    <a href="{file_url}" class="whiteboard-link">æŸ¥çœ‹ç™½æ¿</a>
                </div>
"""
    index_html += """
            </div>
        </div>
"""

# ä¸‹å†Œ
if volume2_boards:
    index_html += """
        <div class="volume-section">
            <h2 class="volume-title">ğŸ“— é«˜ç­‰æ•°å­¦ï¼ˆä¸‹å†Œï¼‰</h2>
            <div class="whiteboard-grid">
"""
    for wb in volume2_boards:
        file_url = f"https://{os.environ.get('GITHUB_REPOSITORY_OWNER', 'your-username')}.github.io/math-teaching-system/data/whiteboards/volume2/{wb['filename']}"
        index_html += f"""
                <div class="whiteboard-card">
                    <div class="whiteboard-title">{wb['title']}</div>
                    <div class="whiteboard-meta">
                        éš¾åº¦ï¼š{wb['difficulty']}<br>
                        ç”Ÿæˆæ—¶é—´ï¼š{wb['timestamp'][:10]}
                    </div>
                    <a href="{file_url}" class="whiteboard-link">æŸ¥çœ‹ç™½æ¿</a>
                </div>
"""
    index_html += """
            </div>
        </div>
"""

index_html += """
    </div>
</body>
</html>
"""

with open('data/whiteboards/index.html', 'w', encoding='utf-8') as f:
    f.write(index_html)

print("ç™½æ¿ç´¢å¼•å·²ç”Ÿæˆ")
PYTHON_SCRIPT
      
      - name: æäº¤ç´¢å¼•æ–‡ä»¶
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add data/whiteboards/index.html
          git commit -m "æ›´æ–°ç™½æ¿ç´¢å¼•"
          git push
      
      - name: ç”Ÿæˆå·¥ä½œæµæ€»ç»“
        run: |
          echo "âœ… ç™½æ¿ç”Ÿæˆå®Œæˆï¼" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**ç”Ÿæˆå‚æ•°ï¼š**" >> $GITHUB_STEP_SUMMARY
          echo "- æ•™æï¼š${{ github.event.inputs.volume }}" >> $GITHUB_STEP_SUMMARY
          echo "- ç« èŠ‚ï¼š${{ github.event.inputs.chapter }}" >> $GITHUB_STEP_SUMMARY
          echo "- éš¾åº¦ï¼š${{ github.event.inputs.difficulty }}" >> $GITHUB_STEP_SUMMARY
          echo "- è¯¾å ‚ç»ƒä¹ ï¼š${{ github.event.inputs.include_exercises }}" >> $GITHUB_STEP_SUMMARY
          echo "- è¯¾åä½œä¸šï¼š${{ github.event.inputs.include_homework }}" >> $GITHUB_STEP_SUMMARY
          echo "- å­¦ç”Ÿç¬”è®°ï¼š${{ github.event.inputs.enable_notes }}" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "ğŸ“Š ç™½æ¿æ–‡ä»¶å·²ä¿å­˜åˆ° \`data/whiteboards/\` ç›®å½•" >> $GITHUB_STEP_SUMMARY
          echo "ğŸ”— å¯é€šè¿‡ç™½æ¿ç´¢å¼•é¡µé¢æŸ¥çœ‹æ‰€æœ‰ç”Ÿæˆçš„ç™½æ¿" >> $GITHUB_STEP_SUMMARY